<%#include "shorturl.h" %>
<h1>TShort <small>A link shortener written in the C++ TreeFrog Framework</small></h1>

<%== linkTo("New TShort", urla("entry")) %>

<table class='table'>
  <thead>
    <tr>
      <th>ID</th>
      <th>Keyword</th>
      <th>Url</th>
      <th>Hits</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  <% tfetch(QList<Shorturl>, shorturlList); %>
  <% for (QListIterator<Shorturl> it(shorturlList); it.hasNext(); ) {
       const Shorturl &i = it.next(); %>
    <tr>
      <td><%= i.id() %></td>
      <td><%== linkTo(i.keyword(), "/l/" + i.keyword()) %>
      <td><%= i.url() %></td>
      <td><%= i.hits() %></td>
      <td>
        <%== linkTo("Show", urla("show", i.id())) %>
        <%== linkTo("Edit", urla("edit", i.id())) %>
        <%== linkTo("Remove", urla("remove", i.id()), Tf::Post, "confirm('Are you sure?')") %>
      </td>
    </tr>
  <% } %>
  </tbody>
</table>
